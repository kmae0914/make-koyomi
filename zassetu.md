# 日本の雑節 - 定義と算出方法

## 概要
雑節（ざっせつ）は、二十四節気以外の日本の伝統的な暦注上の区切りを指します。農事暦や年中行事と密接に結びついており、現代でも広く親しまれています。

## 各雑節の定義と算出方法

### 1. 節分（せつぶん）
- **定義**: 現在では土用の入りは太陽黄経が297°、27°、117°、207°となる日として定義されます。
- **算出方法**: 
  - 各太陽黄経の値に対応する日時を取得する
- **備考**:　zassestu.pyには含めずdoyou.pyに処理を記載

### 2. お彼岸（おひがん）
- **定義**: 春分・秋分を中日とする7日間
- **期間**: 中日の前後3日間を含む
- **算出方法**:
  - 春分/秋分の日時を二十四節気から取得
  - その日を中心に前後3日間（計7日間）を算出
  - 春彼岸：春分の前後3日
  - 秋彼岸：秋分の前後3日

### 3. 土用（どよう）
- **定義**: 各季節の終わりの18日間
- **種類**:
  - 春土用：春分後の18日間
  - 夏土用：夏至後の18日間
  - 秋土用：秋分後の18日間
  - 冬土用：冬至後の18日間
- **算出方法**:
  - 各節気（春分/夏至/秋分/冬至）の日時を取得
  - その日から次の節気（穀雨/大暑/寒露/大寒）までの間の最後の18日間を算出

### 4. 社日（しゃにち）
- **定義**: 春分・秋分の前後の最も近い戊（つちのえ）の日
- **算出方法**:
  - 春分/秋分の日時を取得
  - その日に最も近い戊の日を特定
  - 戊の日は六十干支で5番目、15番目、25番目、35番目、45番目、55番目に当たる日

### 5. 八十八夜（はちじゅうはちや）
- **定義**: 立春から数えて88日目
- **意義**: 農事暦で茶摘みの目安とされる
- **算出方法**:
  - 立春の日時を取得
  - そこから88日後を計算

### 6. 入梅（つゆいり）
- **定義**: 芒種の日()
- **意義**: 梅雨入りの目安とされる
- **算出方法**:
  - 二十四節気から芒種の日時を取得
  - その日をそのまま入梅とする

### 7. 半夏生（はんげしょう）
- **定義**: 夏至から11日目
- **意義**: 田植えの目安とされる
- **算出方法**:
  - 夏至の日時を取得
  - そこから11日後を計算

### 8. 二百十日（にひゃくとおか）
- **定義**: 立春から数えて210日目
- **意義**: 台風の時期の目安とされる
- **算出方法**:
  - 立春の日時を取得
  - そこから210日後を計算

### 9. 七夕（たなばた）
#### 新暦七夕
- **定義**: 7月7日
- **算出方法**: 単純に7月7日を設定

#### 伝統的七夕（旧暦七夕）
- **定義**: 旧暦7月7日
- **算出方法**:
  - 旧暦から新暦への変換が必要
  - 旧暦の7月7日に相当する新暦の日付を計算
  - ※実装には別途旧暦変換ライブラリが必要

## 計算上の注意点

1. **時刻の扱い**:
   - 二十四節気は時刻まで考慮する
   - 派生する雑節も基本的に元となる節気の時刻を継承
   - 暦日のみを扱う場合は0時0分として扱う

2. **時差の考慮**:
   - 計算は日本標準時（JST, UTC+9）で行う
   - 世界時（UTC）との変換が必要な場合は適切に処理

3. **年をまたぐ計算**:
   - 冬至や立春前後の計算では、年をまたぐ可能性を考慮
   - 前年末や次年初めのデータが必要な場合がある

4. **精度と歴史的な違い**:
   - 現代の天文学的計算に基づく節気と、
   - 歴史的な暦で使用されていた日付には
   - 若干のずれが生じる可能性がある